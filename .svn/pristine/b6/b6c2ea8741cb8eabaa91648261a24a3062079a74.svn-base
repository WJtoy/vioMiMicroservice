package com.kkl.kklplus.b2b.viomi;

import com.kkl.kklplus.b2b.viomi.entity.VioMiApiLog;
import com.kkl.kklplus.b2b.viomi.http.utils.OkHttpUtils;
import com.kkl.kklplus.b2b.viomi.service.ViomiApiLogService;
import com.kkl.kklplus.b2b.viomi.utils.QuarterUtils;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.ActiveProfiles;
import org.springframework.test.context.junit4.SpringRunner;

import java.util.Date;
import java.util.List;

@RunWith(SpringRunner.class)
@SpringBootTest
@ActiveProfiles("dev")
public class B2BVioMIApplicationTests {

    @Autowired
    ViomiApiLogService viomiApiLogService;


    @Test
    public void test() {
        VioMiApiLog vioMiApiLog = new VioMiApiLog();
        vioMiApiLog.setB2bOrderId(2l);
        vioMiApiLog.setOperatingStatus(1);
        vioMiApiLog.setCreateDt(System.currentTimeMillis());
        vioMiApiLog.setUpdateDt(System.currentTimeMillis());
        vioMiApiLog.setCreateBy(1l);
        vioMiApiLog.setUpdateBy(1L);
        vioMiApiLog.setInfoJson("{}");
        vioMiApiLog.setInterfaceName("测试");
        vioMiApiLog.setProcessComment("测试测绘师");
        vioMiApiLog.setProcessFlag(1);
        vioMiApiLog.setProcessTime(1);
        vioMiApiLog.setQuarter(QuarterUtils.getQuarter(new Date()));
        vioMiApiLog.setResultJson("{}");
        viomiApiLogService.insert(vioMiApiLog);

    }

    @Test
    public void test2(){
        VioMiApiLog vioMiApiLog = new VioMiApiLog();
        vioMiApiLog.setId(1321652251021938688L);
        vioMiApiLog.setProcessFlag(3);
        vioMiApiLog.setResultJson("[{}]");
        vioMiApiLog.setUpdateBy(System.currentTimeMillis());
        viomiApiLogService.updateProcessFlag(vioMiApiLog);
    }

    @Test
    public void test3(){
        List<VioMiApiLog> result = viomiApiLogService.getVioMiApiLogList(1318141143229272065L);
        System.out.println(result);
    }

}
